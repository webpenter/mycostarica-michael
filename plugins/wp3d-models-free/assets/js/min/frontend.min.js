function promptJSShow(label,id,plink,title){prompt(label,'<div id="wp3d-'+id+'"><a href="'+plink+'">LOADING - '+title+'</a><script src="//wp3d-models.s3.us-east-2.amazonaws.com/js/embed-iframe.js?id=wp3d-'+id+'"><\/script></div>')}function promptIFShow(label,plink){prompt(label,'<iframe width="853" height="480" src="'+plink+'" frameborder="0" allow="vr" allowfullscreen="allowfullscreen"></iframe>')}(function(jQuery){var thisdoc=jQuery(document),moved=false,pos={x:null,y:null},abs=Math.abs,mclick={"mousedown.mclick":function(e){pos.x=e.pageX;pos.y=e.pageY;moved=false},"mouseup.mclick":function(e){moved=abs(pos.x-e.pageX)>jQuery.clickMouseMoved.threshold||abs(pos.y-e.pageY)>jQuery.clickMouseMoved.threshold}};thisdoc.on(mclick);jQuery.clickMouseMoved=function(){return moved};jQuery.clickMouseMoved.threshold=3})(jQuery);function preload(arrayOfImages){jQuery(arrayOfImages).each(function(){(new Image).src=this})}function detectIOS(){var t=window.navigator.userAgent,e=/iPad|iPhone|iPod/;return e.test(t)}(function($){"use strict";if("undefined"===typeof $){if("console"in window){window.console.info("Too much lightness, Featherlight needs jQuery.")}return}function Featherlight($content,config){if(this instanceof Featherlight){this.id=Featherlight.id++;this.setup($content,config);this.chainCallbacks(Featherlight._callbackChain)}else{var fl=new Featherlight($content,config);fl.open();return fl}}var opened=[],pruneOpened=function(remove){opened=$.grep(opened,function(fl){return fl!==remove&&fl.$instance.closest("body").length>0});return opened};function slice(obj,set){var r={};for(var key in obj){if(key in set){r[key]=obj[key];delete obj[key]}}return r}var iFrameAttributeSet={allowfullscreen:1,frameborder:1,height:1,longdesc:1,marginheight:1,marginwidth:1,name:1,referrerpolicy:1,scrolling:1,sandbox:1,src:1,srcdoc:1,width:1};function parseAttrs(obj,prefix){var attrs={},regex=new RegExp("^"+prefix+"([A-Z])(.*)");for(var key in obj){var match=key.match(regex);if(match){var dasherized=(match[1]+match[2].replace(/([A-Z])/g,"-$1")).toLowerCase();attrs[dasherized]=obj[key]}}return attrs}var eventMap={keyup:"onKeyUp",resize:"onResize"};var globalEventHandler=function(event){$.each(Featherlight.opened().reverse(),function(){if(!event.isDefaultPrevented()){if(false===this[eventMap[event.type]](event)){event.preventDefault();event.stopPropagation();return false}}})};var toggleGlobalEvents=function(set){if(set!==Featherlight._globalHandlerInstalled){Featherlight._globalHandlerInstalled=set;var events=$.map(eventMap,function(_,name){return name+"."+Featherlight.prototype.namespace}).join(" ");$(window)[set?"on":"off"](events,globalEventHandler)}};Featherlight.prototype={constructor:Featherlight,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:false,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:true,closeIcon:"&#10005;",loading:"",persist:false,otherClose:null,beforeOpen:$.noop,beforeContent:$.noop,beforeClose:$.noop,afterOpen:$.noop,afterContent:$.noop,afterClose:$.noop,onKeyUp:$.noop,onResize:$.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(target,config){if(typeof target==="object"&&target instanceof $===false&&!config){config=target;target=undefined}var self=$.extend(this,config,{target:target}),css=!self.resetCss?self.namespace:self.namespace+"-reset",$background=$(self.background||['<div class="'+css+"-loading "+css+'">','<div class="'+css+'-content">','<button class="'+css+"-close-icon "+self.namespace+'-close" aria-label="Close">',self.closeIcon,"</button>",'<div class="'+self.namespace+'-inner">'+self.loading+"</div>","</div>","</div>"].join("")),closeButtonSelector="."+self.namespace+"-close"+(self.otherClose?","+self.otherClose:"");self.$instance=$background.clone().addClass(self.variant);self.$instance.on(self.closeTrigger+"."+self.namespace,function(event){var $target=$(event.target);if("background"===self.closeOnClick&&$target.is("."+self.namespace)||"anywhere"===self.closeOnClick||$target.closest(closeButtonSelector).length){self.close(event);event.preventDefault()}});return this},getContent:function(){if(this.persist!==false&&this.$content){return this.$content}var self=this,filters=this.constructor.contentFilters,readTargetAttr=function(name){return self.$currentTarget&&self.$currentTarget.attr(name)},targetValue=readTargetAttr(self.targetAttr),data=self.target||targetValue||"";var filter=filters[self.type];if(!filter&&data in filters){filter=filters[data];data=self.target&&targetValue}data=data||readTargetAttr("href")||"";if(!filter){for(var filterName in filters){if(self[filterName]){filter=filters[filterName];data=self[filterName]}}}if(!filter){var target=data;data=null;$.each(self.contentFilters,function(){filter=filters[this];if(filter.test){data=filter.test(target)}if(!data&&filter.regex&&target.match&&target.match(filter.regex)){data=target}return!data});if(!data){if("console"in window){window.console.error("Featherlight: no content filter found "+(target?' for "'+target+'"':" (no target specified)"))}return false}}return filter.process.call(self,data)},setContent:function($content){var self=this;if($content.is("iframe")){self.$instance.addClass(self.namespace+"-iframe")}self.$instance.removeClass(self.namespace+"-loading");self.$instance.find("."+self.namespace+"-inner").not($content).slice(1).remove().end().replaceWith($.contains(self.$instance[0],$content[0])?"":$content);self.$content=$content.addClass(self.namespace+"-inner");return self},open:function(event){var self=this;self.$instance.hide().appendTo(self.root);if((!event||!event.isDefaultPrevented())&&self.beforeOpen(event)!==false){if(event){event.preventDefault()}var $content=self.getContent();if($content){opened.push(self);toggleGlobalEvents(true);self.$instance.fadeIn(self.openSpeed);self.beforeContent(event);return $.when($content).always(function($content){self.setContent($content);self.afterContent(event)}).then(self.$instance.promise()).done(function(){self.afterOpen(event)})}}self.$instance.detach();return $.Deferred().reject().promise()},close:function(event){var self=this,deferred=$.Deferred();if(self.beforeClose(event)===false){deferred.reject()}else{if(0===pruneOpened(self).length){toggleGlobalEvents(false)}self.$instance.fadeOut(self.closeSpeed,function(){self.$instance.detach();self.afterClose(event);deferred.resolve()})}return deferred.promise()},resize:function(w,h){if(w&&h){this.$content.css("width","").css("height","");var ratio=Math.max(w/(this.$content.parent().width()-1),h/(this.$content.parent().height()-1));if(ratio>1){ratio=h/Math.floor(h/ratio);this.$content.css("width",""+w/ratio+"px").css("height",""+h/ratio+"px")}}},chainCallbacks:function(chain){for(var name in chain){this[name]=$.proxy(chain[name],this,$.proxy(this[name],this))}}};$.extend(Featherlight,{id:0,autoBind:"[data-featherlight]",defaults:Featherlight.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(elem){return elem instanceof $&&elem},process:function(elem){return this.persist!==false?$(elem):$(elem).clone(true)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff|bmp|svg)(\?\S*)?$/i,process:function(url){var self=this,deferred=$.Deferred(),img=new Image,$img=$('<img src="'+url+'" alt="" class="'+self.namespace+'-image" />');img.onload=function(){$img.naturalWidth=img.width;$img.naturalHeight=img.height;deferred.resolve($img)};img.onerror=function(){deferred.reject($img)};img.src=url;return deferred.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(html){return $(html)}},ajax:{regex:/./,process:function(url){var self=this,deferred=$.Deferred();var $container=$("<div></div>").load(url,function(response,status){if(status!=="error"){deferred.resolve($container.contents())}deferred.fail()});return deferred.promise()}},iframe:{process:function(url){var deferred=new $.Deferred;var $content=$("<iframe/>");var css=parseAttrs(this,"iframe");var attrs=slice(css,iFrameAttributeSet);$content.hide().attr("src",url).attr(attrs).css(css).on("load",function(){deferred.resolve($content.show())}).appendTo(this.$instance.find("."+this.namespace+"-content"));return deferred.promise()}},text:{process:function(text){return $("<div>",{text:text})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(element,namespace){var Klass=this,regexp=new RegExp("^data-"+namespace+"-(.*)"),config={};if(element&&element.attributes){$.each(element.attributes,function(){var match=this.name.match(regexp);if(match){var val=this.value,name=$.camelCase(match[1]);if($.inArray(name,Klass.functionAttributes)>=0){val=new Function(val)}else{try{val=JSON.parse(val)}catch(e){}}config[name]=val}})}return config},extend:function(child,defaults){var Ctor=function(){this.constructor=child};Ctor.prototype=this.prototype;child.prototype=new Ctor;child.__super__=this.prototype;$.extend(child,this,defaults);child.defaults=child.prototype;return child},attach:function($source,$content,config){var Klass=this;if(typeof $content==="object"&&$content instanceof $===false&&!config){config=$content;$content=undefined}config=$.extend({},config);var namespace=config.namespace||Klass.defaults.namespace,tempConfig=$.extend({},Klass.defaults,Klass.readElementConfig($source[0],namespace),config),sharedPersist;var handler=function(event){var $target=$(event.currentTarget);var elemConfig=$.extend({$source:$source,$currentTarget:$target},Klass.readElementConfig($source[0],tempConfig.namespace),Klass.readElementConfig(event.currentTarget,tempConfig.namespace),config);var fl=sharedPersist||$target.data("featherlight-persisted")||new Klass($content,elemConfig);if(fl.persist==="shared"){sharedPersist=fl}else if(fl.persist!==false){$target.data("featherlight-persisted",fl)}if(elemConfig.$currentTarget.blur){elemConfig.$currentTarget.blur()}fl.open(event)};$source.on(tempConfig.openTrigger+"."+tempConfig.namespace,tempConfig.filter,handler);return handler},current:function(){var all=this.opened();return all[all.length-1]||null},opened:function(){var klass=this;pruneOpened();return $.grep(opened,function(fl){return fl instanceof klass})},close:function(event){var cur=this.current();if(cur){return cur.close(event)}},_onReady:function(){var Klass=this;if(Klass.autoBind){$(Klass.autoBind).each(function(){Klass.attach($(this))});$(document).on("click",Klass.autoBind,function(evt){if(evt.isDefaultPrevented()){return}var handler=Klass.attach($(evt.currentTarget));handler(evt)})}},_callbackChain:{onKeyUp:function(_super,event){if(27===event.keyCode){if(this.closeOnEsc){$.featherlight.close(event)}return false}else{return _super(event)}},beforeOpen:function(_super,event){this._previouslyActive=document.activeElement;this._$previouslyTabbable=$("a, input, select, textarea, iframe, button, iframe, [contentEditable=true]").not("[tabindex]").not(this.$instance.find("button"));this._$previouslyWithTabIndex=$("[tabindex]").not('[tabindex="-1"]');this._previousWithTabIndices=this._$previouslyWithTabIndex.map(function(_i,elem){return $(elem).attr("tabindex")});this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr("tabindex",-1);if(document.activeElement.blur){document.activeElement.blur()}return _super(event)},afterClose:function(_super,event){var r=_super(event);var self=this;this._$previouslyTabbable.removeAttr("tabindex");this._$previouslyWithTabIndex.each(function(i,elem){$(elem).attr("tabindex",self._previousWithTabIndices[i])});this._previouslyActive.focus();return r},onResize:function(_super,event){this.resize(this.$content.naturalWidth,this.$content.naturalHeight);return _super(event)},afterContent:function(_super,event){var r=_super(event);this.$instance.find("[autofocus]:not([disabled])").focus();this.onResize(event);return r}}});$.featherlight=Featherlight;$.fn.featherlight=function($content,config){Featherlight.attach(this,$content,config);return this};$(document).ready(function(){Featherlight._onReady()})})(jQuery);function updateViewportDimensions(){var w=window,d=document,e=d.documentElement,g=d.getElementsByTagName("body")[0],x=w.innerWidth||e.clientWidth||g.clientWidth,y=w.innerHeight||e.clientHeight||g.clientHeight;return{width:x,height:y}}var viewport=updateViewportDimensions();var waitForFinalEvent=function(){var timers={};return function(callback,ms,uniqueId){if(!uniqueId){uniqueId="Don't call this twice without a uniqueId"}if(timers[uniqueId]){clearTimeout(timers[uniqueId])}timers[uniqueId]=setTimeout(callback,ms)}}();var timeToWaitForLast=100;jQuery(window).resize(function(){waitForFinalEvent(function(){viewport=updateViewportDimensions()},timeToWaitForLast,"general-resize")});jQuery(document).ready(function(e){if(detectIOS()){jQuery("body").addClass("is-ios")}jQuery("ul.wp3d-prop-tabs li a").click(function(e){e.preventDefault();var tab_id=jQuery(this).attr("href");jQuery("ul.wp3d-prop-tabs li").removeClass("active");jQuery(".wp3d-tab-content div").removeClass("active");jQuery(this).parent("li").addClass("active");jQuery(tab_id).addClass("active")});jQuery("span.wp3d-caption-open").click(function(){jQuery(this).hide();jQuery(this).siblings("div.wp3d-gallery-caption").addClass("enabled")});jQuery("span.wp3d-caption-close").click(function(){jQuery(this).parent().removeClass("enabled");jQuery(this).parent().siblings("span.wp3d-caption-open").show()});jQuery("#wp3d-zoom-gallery a").featherlight({targetAttr:"href",type:"image",beforeOpen:function(event){if(jQuery.clickMouseMoved()){return false}}});jQuery("#wp3d-floorplan-images a").on("click",function(e){e.preventDefault();var imgtarget=jQuery(this).data("featherlight");var imgsrc=jQuery(imgtarget+" img").data("src");jQuery(imgtarget+" img").attr("src",imgsrc)});jQuery("#filter-3d-models a").click(function(e){e.preventDefault();var selector=jQuery(this).attr("data-filter");jQuery("#filter-3d-models .active").removeClass("active");jQuery(this).addClass("active");if(selector=="all-models"){jQuery("#wp3d-models div.model-list-wrap").fadeIn("slow").removeClass("inactive").addClass("active")}else{jQuery("#wp3d-models div.model-list-wrap").each(function(){if(!jQuery(this).hasClass(selector)){jQuery(this).removeClass("active").addClass("inactive");jQuery(this).fadeOut("normal")}else{jQuery(this).addClass("active").removeClass("inactive");jQuery(this).fadeIn("slow")}})}return false});var preloadModel=jQuery("#mp-iframe").data("preload");if(preloadModel===true){console.log("preload");if(viewport.width>=768){var mp_iframe_preload_src=jQuery("#mp-iframe").data("src");if(mp_iframe_preload_src!==""){jQuery("#mp-iframe").attr("src",mp_iframe_preload_src)}}}else{preloadModel=false}jQuery(".wp3d-embed-wrap #wp3d-intro a").click(function(e){e.preventDefault();var mp_iframe_src=jQuery("#mp-iframe").data("src");var mp_iframe_allow=jQuery("#mp-iframe").data("allow");var logo_overlay=jQuery(".wp3d-embed-wrap .iframe-logo-overlay").clone();var mp_iframe_close='<a href="#" id="tour-close" title="CLOSE TOUR"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-times fa-stack-1x fa-inverse"></i></span></a>';if(viewport.width<768||detectIOS()){jQuery("html").addClass("wp3d-fullscreen");jQuery('<div id="wp3d-fullscreen-wrap"><iframe src="'+mp_iframe_src+'" frameborder="0" allow="vr'+mp_iframe_allow+'" allowfullscreen></div>').appendTo("body");jQuery('<div id="wp3d-fullscreen-header">'+mp_iframe_close+"</div>").appendTo("body");logo_overlay.appendTo("#wp3d-fullscreen-wrap");if(viewport.width<481){jQuery(".iframe-logo-overlay").delay(3e3).fadeOut()}if(jQuery(".wp3d-embed-wrap").hasClass("wp3d-sold")){markedSold=true;jQuery(".wp3d-embed-wrap").removeClass("wp3d-sold")}else if(jQuery(".wp3d-embed-wrap").hasClass("wp3d-pending")){markedPending=true;jQuery(".wp3d-embed-wrap").removeClass("wp3d-pending")}else{markedSold=false;markedPending=false}jQuery("#wp3d-fullscreen-header a#tour-close").click(function(e){e.preventDefault();jQuery("#wp3d-fullscreen-wrap").hide("fast");jQuery("#wp3d-fullscreen-header").hide("fast");jQuery("#wp3d-fullscreen-header, #wp3d-fullscreen-wrap").remove();jQuery("html").removeClass("wp3d-fullscreen");if(markedSold){jQuery(".wp3d-embed-wrap").addClass("wp3d-sold")}else if(markedPending){jQuery(".wp3d-embed-wrap").addClass("wp3d-pending")}})}else{if(mp_iframe_src!==""&&preloadModel===false){jQuery("#mp-iframe").attr("src",mp_iframe_src)}jQuery("#wp3d-intro").fadeOut("slow");jQuery(".wp3d-embed-wrap").removeClass("wp3d-sold wp3d-pending")}});if(jQuery.fn.swiper&&jQuery(".wp3d-swiper-container").length){var swiper=new Swiper(".wp3d-swiper-container",{pagination:".swiper-pagination",paginationClickable:".swiper-pagination",nextButton:".swiper-button-next",prevButton:".swiper-button-prev",keyboardControl:true,loop:true,onInit:function(swiper){jQuery(".swiper-slide-active").each(function(index){var src=jQuery(this).attr("data-src");var prevsrc=jQuery(this).siblings(".swiper-slide-prev").attr("data-src");jQuery(this).css("background-image","url("+src+")");preload([prevsrc])})},onSlideNextStart:function(swiper){jQuery(".swiper-slide-active").each(function(index){var src=jQuery(this).attr("data-src");var nextsrc=jQuery(this).siblings(".swiper-slide-next").attr("data-src");jQuery(this).css("background-image","url("+src+")");preload([nextsrc])})},onSlidePrevStart:function(swiper){jQuery(".swiper-slide-active").each(function(index){var src=jQuery(this).attr("data-src");var current=jQuery(this),index=current.index();if(index===0){var prevsrc=jQuery(this).siblings(".swiper-slide:nth-last-child(3)").attr("data-src")}else{var prevsrc=jQuery(this).siblings(".swiper-slide-prev").attr("data-src")}jQuery(this).css("background-image","url("+src+")");preload([prevsrc])})}})}if(jQuery.fn.slick){var _=jQuery(".slick-slide.cloned-slide");function loadClone(){jQuery(".slick-slide.cloned-slide img[data-lazy]").each(function(){var image=jQuery(this),imageSource=jQuery(this).attr("data-lazy"),imageToLoad=document.createElement("img");imageToLoad.onload=function(){image.animate({opacity:0},100,function(){image.attr("src",imageSource).animate({opacity:1},200,function(){image.removeAttr("data-lazy").removeClass("slick-loading")});_.trigger("lazyLoaded",[_,image,imageSource])})};imageToLoad.onerror=function(){image.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");_.trigger("lazyLoadError",[_,image,imageSource])};imageToLoad.src=imageSource})}jQuery(".wp3d-zoom-slider").on("init",function(event,slick){jQuery(".slick-track .slick-slide").last().clone().appendTo(".slick-track").addClass("cloned-slide last-slide");jQuery(".slick-track .slick-slide").first().clone().appendTo(".slick-track").removeClass("slick-current slick-center").addClass("cloned-slide first-slide");loadClone()}).on("init reInit afterChange",function(event,slick,currentSlide,nextSlide){var i=(currentSlide?currentSlide:0)+1;jQuery(".slick-current .slick-counter").text(i+"/"+slick.slideCount)}).on("lazyLoaded",function(event,slick,image,imageSource){setTimeout(function(){jQuery("#wp3d-zoom-gallery").removeClass("gallery-loading")},300)}).slick({lazyLoad:"ondemand",dots:true,infinite:false,speed:300,slidesToShow:1,slidesToScroll:1,swipeToSlide:true,centerMode:true,variableWidth:true});jQuery(window).load(function(){jQuery("body").addClass("loaded");jQuery("body").delay(800).addClass("loaded-delay")});jQuery(".wp3d-related-slider").slick({dots:true,infinite:false,speed:300,slidesToShow:5,slidesToScroll:5,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:4,infinite:true,dots:true}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:480,settings:{slidesToShow:2,slidesToScroll:2}}]})}window.setTimeout(function(){jQuery("#wp3d-intro").removeClass("is-loading")},500);jQuery(window).load(function(){jQuery("#wp3d-intro .wp3d-start > img").delay(800).addClass("loaded");if(window.location.hash){var hash=window.location.hash.substring(1);if(hash=="start"){console.log("WP3D Starting!");jQuery(".wp3d-embed-wrap #wp3d-intro a").click()}}})});