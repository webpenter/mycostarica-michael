/*! wp3d-models 2020-07-14 */

function inherits(e,t){function a(){}a.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new a,e.prototype.constructor=e}function MarkerLabel_(e,t,a){this.marker_=e,this.handCursorURL_=e.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=MarkerLabel_.getSharedCross(t)}function MarkerWithLabel(e){(e=e||{}).labelContent=e.labelContent||"",e.labelAnchor=e.labelAnchor||new google.maps.Point(0,0),e.labelClass=e.labelClass||"markerLabels",e.labelStyle=e.labelStyle||{},e.labelInBackground=e.labelInBackground||!1,void 0===e.labelVisible&&(e.labelVisible=!0),void 0===e.raiseOnDrag&&(e.raiseOnDrag=!0),void 0===e.clickable&&(e.clickable=!0),void 0===e.draggable&&(e.draggable=!1),void 0===e.optimized&&(e.optimized=!1),e.crossImage=e.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",e.handCursor=e.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",e.optimized=!1,this.label=new MarkerLabel_(this,e.crossImage,e.handCursor),google.maps.Marker.apply(this,arguments)}inherits(MarkerLabel_,google.maps.OverlayView),MarkerLabel_.getSharedCross=function(e){var t;return void 0===MarkerLabel_.getSharedCross.crossDiv&&((t=document.createElement("img")).style.cssText="position: absolute; z-index: 1000002; display: none;",t.style.marginLeft="-8px",t.style.marginTop="-9px",t.src=e,MarkerLabel_.getSharedCross.crossDiv=t),MarkerLabel_.getSharedCross.crossDiv},MarkerLabel_.prototype.onAdd=function(){function t(e){e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}function a(){p.marker_.setAnimation(null)}var i,s,r,o,l,n,g,p=this,d=!1,m=!1,h="url("+this.handCursorURL_+")";this.getPanes().overlayImage.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),void 0===MarkerLabel_.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),MarkerLabel_.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(e){(p.marker_.getDraggable()||p.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(p.marker_,"mouseover",e))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(e){!p.marker_.getDraggable()&&!p.marker_.getClickable()||m||(this.style.cursor=p.marker_.getCursor(),google.maps.event.trigger(p.marker_,"mouseout",e))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(e){m=!1,p.marker_.getDraggable()&&(d=!0,this.style.cursor=h),(p.marker_.getDraggable()||p.marker_.getClickable())&&(google.maps.event.trigger(p.marker_,"mousedown",e),t(e))}),google.maps.event.addDomListener(document,"mouseup",function(e){var t;if(d&&(d=!1,p.eventDiv_.style.cursor="pointer",google.maps.event.trigger(p.marker_,"mouseup",e)),m){if(l){(t=p.getProjection().fromLatLngToDivPixel(p.marker_.getPosition())).y+=20,p.marker_.setPosition(p.getProjection().fromDivPixelToLatLng(t));try{p.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(a,1406)}catch(e){}}p.crossDiv_.style.display="none",p.marker_.setZIndex(i),m=!(o=!0),e.latLng=p.marker_.getPosition(),google.maps.event.trigger(p.marker_,"dragend",e)}}),google.maps.event.addListener(p.marker_.getMap(),"mousemove",function(e){var t;d&&(m?(e.latLng=new google.maps.LatLng(e.latLng.lat()-s,e.latLng.lng()-r),t=p.getProjection().fromLatLngToDivPixel(e.latLng),l&&(p.crossDiv_.style.left=t.x+"px",p.crossDiv_.style.top=t.y+"px",p.crossDiv_.style.display="",t.y-=20),p.marker_.setPosition(p.getProjection().fromDivPixelToLatLng(t)),l&&(p.eventDiv_.style.top=t.y+20+"px"),google.maps.event.trigger(p.marker_,"drag",e)):(s=e.latLng.lat()-p.marker_.getPosition().lat(),r=e.latLng.lng()-p.marker_.getPosition().lng(),i=p.marker_.getZIndex(),n=p.marker_.getPosition(),g=p.marker_.getMap().getCenter(),l=p.marker_.get("raiseOnDrag"),m=!0,p.marker_.setZIndex(1e6),e.latLng=p.marker_.getPosition(),google.maps.event.trigger(p.marker_,"dragstart",e)))}),google.maps.event.addDomListener(document,"keydown",function(e){m&&27===e.keyCode&&(l=!1,p.marker_.setPosition(n),p.marker_.getMap().setCenter(g),google.maps.event.trigger(document,"mouseup",e))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(e){(p.marker_.getDraggable()||p.marker_.getClickable())&&(o?o=!1:(google.maps.event.trigger(p.marker_,"click",e),t(e)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(e){(p.marker_.getDraggable()||p.marker_.getClickable())&&(google.maps.event.trigger(p.marker_,"dblclick",e),t(e))}),google.maps.event.addListener(this.marker_,"dragstart",function(e){m||(l=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(e){m||l&&(p.setPosition(20),p.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(e){m||l&&p.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){p.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){p.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){p.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){p.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){p.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){p.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){p.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){p.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){p.setStyles()})]},MarkerLabel_.prototype.onRemove=function(){var e;for(this.labelDiv_.parentNode.removeChild(this.labelDiv_),this.eventDiv_.parentNode.removeChild(this.eventDiv_),e=0;e<this.listeners_.length;e++)google.maps.event.removeListener(this.listeners_[e])},MarkerLabel_.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},MarkerLabel_.prototype.setContent=function(){var e=this.marker_.get("labelContent");void 0===e.nodeType?(this.labelDiv_.innerHTML=e,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(e),e=e.cloneNode(!0),this.eventDiv_.appendChild(e))},MarkerLabel_.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},MarkerLabel_.prototype.setStyles=function(){var e,t;for(e in this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",t=this.marker_.get("labelStyle"))t.hasOwnProperty(e)&&(this.labelDiv_.style[e]=t[e],this.eventDiv_.style[e]=t[e]);this.setMandatoryStyles()},MarkerLabel_.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden",void 0!==this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},MarkerLabel_.prototype.setAnchor=function(){var e=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-e.x+"px",this.labelDiv_.style.marginTop=-e.y+"px",this.eventDiv_.style.marginLeft=-e.x+"px",this.eventDiv_.style.marginTop=-e.y+"px"},MarkerLabel_.prototype.setPosition=function(e){var t=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());void 0===e&&(e=0),this.labelDiv_.style.left=Math.round(t.x)+"px",this.labelDiv_.style.top=Math.round(t.y-e)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},MarkerLabel_.prototype.setZIndex=function(){var e=this.marker_.get("labelInBackground")?-1:1;void 0===this.marker_.getZIndex()?this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+e:this.labelDiv_.style.zIndex=this.marker_.getZIndex()+e,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex},MarkerLabel_.prototype.setVisible=function(){this.marker_.get("labelVisible")?this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none":this.labelDiv_.style.display="none",this.eventDiv_.style.display=this.labelDiv_.style.display},inherits(MarkerWithLabel,google.maps.Marker),MarkerWithLabel.prototype.setMap=function(e){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(e)},jQuery(document).ready(function(){var e,t,a,i,r,s,o=(e=window,t=document,a=t.documentElement,i=t.getElementsByTagName("body")[0],{width:e.innerWidth||a.clientWidth||i.clientWidth,height:e.innerHeight||a.clientHeight||i.clientHeight}),l=jQuery("#wp3d-models").attr("data-viewterm"),n=[];jQuery("#wp3d-models > div").each(function(){if(jQuery(this).attr("data-latlng")){var e={};e.lat=parseFloat(jQuery(this).attr("data-latlng").split(",")[0]),e.lon=parseFloat(jQuery(this).attr("data-latlng").split(",")[1]),e.slug=jQuery(this).attr("data-slug"),e.thumb=decodeURIComponent(jQuery(this).attr("data-thumb")),e.title=jQuery(this).attr("data-title"),e.marker=jQuery(this).attr("data-marker-type"),e.types=jQuery(this).attr("class").split(/\s+/),n.push(e)}});var g=[],p=new google.maps.LatLng(42.877742,-97.380979);if(jQuery("#wp3d-map").attr("data-map-type"))var d=jQuery("#wp3d-map").attr("data-map-type");else d="ROADMAP";var m,h={draggable:768<o.width,zoom:4,center:p,disableDefaultUI:!1,streetViewControl:!1,mapTypeControl:!1,scrollwheel:!1,mapTypeId:google.maps.MapTypeId[d]};r=new google.maps.Map(document.getElementById("wp3d-map"),h),s=new google.maps.LatLngBounds;for(var v=0;v<n.length;v++){var c=new google.maps.LatLng(n[v].lat,n[v].lon),_='<div class="model-infowindow"><h4>'+(m=n[v].title,decodeURIComponent((m+"").replace(/\+/g,"%20")))+'</h4><img src="'+n[v].thumb+'"><a href="'+n[v].slug+'" class="infowindow-btn">'+l+"</a></div>";if("stock"==n[v].marker)var y=new google.maps.Marker({position:c,map:r,title:n[v].place,id:v,html:_,filter:{type:n[v].types}});else y=new MarkerWithLabel({position:c,map:r,title:n[v].place,id:v,html:_,filter:{type:n[v].types},icon:{path:google.maps.SymbolPath.CIRCLE,scale:0},labelAnchor:new google.maps.Point(10,10),labelClass:"wp3d-pin"});var u=new google.maps.InfoWindow({content:"Loading..."});google.maps.event.addListener(y,"click",function(){u.setContent(this.html),u.open(r,this),r.setOptions({draggable:!0})}),g.push(y),s.extend(c),r.fitBounds(s)}google.maps.event.addDomListener(window,"resize",function(){var e=r.getCenter();google.maps.event.trigger(r,"resize"),r.panTo(e)}),google.maps.event.addListener(r,"click",function(e){u.close(),this.setOptions({scrollwheel:!0}),this.setOptions({draggable:!0})}),jQuery("#filter-3d-models a").click(function(e){e.preventDefault();var t=new google.maps.LatLngBounds;u.close();var a=jQuery(e.target).data("filter"),i=null,s=0;jQuery.each(g,function(){-1!=jQuery.inArray(a,this.filter.type)?(t.extend(this.position),null==this.map&&this.setMap(r),i=this.position,s++):this.setMap(null)}),0==s?(r.setZoom(4),r.panTo(p)):1==s?(r.setZoom(8),r.panTo(i)):r.fitBounds(t)}),google.maps.event.addListener(r,"mouseout",function(e){this.setOptions({scrollwheel:!1})}),jQuery("#wp3d-models .map-btn").click(function(){var e;e=jQuery(this).attr("data-id"),google.maps.event.trigger(g[e],"click")}),jQuery("#wp3d-models .map-btn").click(function(){jQuery("html, body").animate({scrollTop:jQuery("#wp3d-map").offset().top-70},200)})});