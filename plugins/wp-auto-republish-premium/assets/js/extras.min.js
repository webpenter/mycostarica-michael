jQuery(document).ready(function(e){if("undefined"==typeof wpar_admin_L10n)return!1;e(".sub-links a.sub-link").click(function(t){t.preventDefault(),e(this).removeClass("dark-text"),e(".wpar-metabox .sub-link:not(.sub-link-"+e(this).data("type")).addClass("dark-text"),e(".wpar-metabox .wpar-"+e(this).data("type")+"-box").show(),e(".wpar-metabox .postbox:not(.wpar-"+e(this).data("type")+"-box)").hide()});var t=function(){e("a.wpar-log-error-viewer").click(function(t){t.preventDefault(),""!=e(this).data("reason")&&e.alert({title:wpar_admin_L10n.error,content:e(this).data("reason"),useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wpar_admin_L10n.close_btn,action:function(){}}}})})},a=function(){e("span.wpar-remove-log-item").click(function(t){t.preventDefault();var a=e(this),r=a.data("entry-id"),o=confirm(wpar_admin_L10n.are_you_sure);e("#"+a.data("selector")+" .nonce-error").hide(),1==o&&e.post(wpar_admin_L10n.ajaxurl,{action:"wpar_process_remove_log_item",security:wpar_admin_L10n.security,log_entry_id:r},function(t,o){!0===t.success?(e("tr.wpar-entry-"+r).remove(),e("#wpar-log-data table tbody").find("tr.wpar-log-entries").length||(e("#wpar-log-data").html('<div style="padding: 10px 14px;background-color: #eee;border: 1px solid #cccccc;">'+wpar_admin_L10n.no_logs_found+"</div>"),"all"==e("#wpar-log-state").val()&&(e("#wpar-log-data-control").remove(),e(window).scrollTop(0)))):e("#"+a.data("selector")+" .nonce-error").text(t.data.error).show().delay(3e3).fadeOut("slow")})})};t(),a(),e("input.wpar-log-filter").click(function(r){r.preventDefault();var o=e(this),n=o.val();o.addClass("disabled").val(wpar_admin_L10n.please_wait),e("#"+o.data("selector")+" .spinner").addClass("is-active"),e("#"+o.data("selector")+" .nonce-error").hide(),e.post(wpar_admin_L10n.ajaxurl,{action:"wpar_process_filter_log",security:wpar_admin_L10n.security,filter:e("#wpar-log-filter-select").val(),count:e("#wpar-log-entries").val()},function(r,s){e("#"+o.data("selector")+" .spinner").removeClass("is-active"),!0===r.success?(e("#wpar-log-data").html(r.data.output),e("input.wpar-log-filter").removeClass("disabled").val(n),t(),a()):(o.val(n).removeClass("disabled"),e("#"+o.data("selector")+" .nonce-error").text(r.data.error).show().delay(3e3).fadeOut("slow"))})}),e("input.wpar-db-remove").click(function(t){t.preventDefault();var a=e(this),r=a.data("action"),o=a.data("notice"),n=a.data("success"),s=a.data("account-type"),i=e.confirm({title:wpar_admin_L10n.warning,content:o,useBootstrap:!1,theme:"material",animation:"scale",type:"red",boxWidth:"30%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wpar_admin_L10n.confirm_button,action:function(){i.close();var t=e.dialog({title:wpar_admin_L10n.deleting,content:wpar_admin_L10n.processing,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});e.post(wpar_admin_L10n.ajaxurl,{action:r,account_type:s,security:wpar_admin_L10n.security},function(a,r){!0===a.success?(t.close(),e.alert({title:wpar_admin_L10n.done,content:n,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wpar_admin_L10n.ok_button,action:function(){"log-data"===s?(e("#wpar-log-data").html('<div style="padding: 10px 14px;background-color: #eee;border: 1px solid #cccccc;">'+wpar_admin_L10n.no_logs_found+"</div>"),e("#wpar-log-data-control").remove()):"log-data"!==s&&e("#wpar-"+s+"-accounts-list, input.wpar-"+s+"-btn-remove").remove()}}}})):(t.close(),e.alert({title:wpar_admin_L10n.error,content:a.data.error,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wpar_admin_L10n.ok_button,action:function(){}}}}))})}},cancel:{text:wpar_admin_L10n.cancel_button,action:function(){}}}})}),e("select#wpar_single_roles").selectize({plugins:["remove_button"],delimiter:",",placeholder:wpar_admin_L10n.select_user_roles,persist:!1,create:!1}),e("#wpar_email_recipients").selectize({plugins:["remove_button","restore_on_backspace"],persist:!1,create:!0,createOnBlur:!0,delimiter:",",createFilter:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}}),e("#wpar_republish_custom_age").on("change input keyup",function(){e("#wpar_republish_post_age").change()}).change(),e("#wpar_minimun_republish_interval").change(function(){"custom"==e(this).val()&&(e(".wpar_css_republish_custom_interval").show(),e("#wpar_republish_custom_interval").attr("required","required")),"custom"!=e(this).val()&&(e(".wpar_css_republish_custom_interval").hide(),e("#wpar_republish_custom_interval").removeAttr("required"))}).change(),e("#wpar_republish_post_age_start_method").change(function(){"specific_date"==e(this).val()&&(e("#wpar_republish_post_age").attr("disabled",!1).change(),e(".wpar_css_republish_post_age_start, #wpar-post-age-help").show(),e(".wpar_css_republish_custom_age_start").hide(),e("#wpar_republish_post_age_start").attr("required","required"),e("#wpar_republish_custom_age_start").removeAttr("required")),"last_hours"==e(this).val()&&(e("#wpar_republish_post_age").val("0").attr("disabled",!0).change(),e(".wpar_css_republish_custom_age_start").show(),e(".wpar_css_republish_post_age_start, #wpar-post-age-help, .wpar_css_republish_custom_age").hide(),e("#wpar_republish_custom_age_start").attr("required","required"),e("#wpar_republish_post_age_start").removeAttr("required"))}).change(),e("#wpar-log-filter-select").change(function(){"default"==e(this).val()&&e("#wpar-log-state").val("all"),"default"!=e(this).val()&&e("#wpar-log-state").val("custom")}).change(),e("#wpar_disable_log").change(function(){e(this).is(":checked")&&e("#nav-container a#logs").hide(),e(this).is(":checked")||e("#nav-container a#logs").show()}).change()});