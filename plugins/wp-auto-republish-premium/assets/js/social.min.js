jQuery(document).ready(function(a){if("undefined"==typeof wpar_admin_L10n)return!1;a("input.wpar-add-social-account").click(function(t){t.preventDefault();var e=a(this),n=e.val(),c=e.data("account-type"),o=e.data("selector");e.val(e.data("processing")).addClass("disabled"),a("#"+o+" .spinner").addClass("is-active"),a("#"+o+" .nonce-success, #"+o+" .nonce-error").hide();var i=a.confirm({title:wpar_admin_L10n.new_account,content:a("#wpar-"+c+"-form").html(),useBootstrap:!1,theme:"modern",type:"blue",boxWidth:"30%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wpar_admin_L10n.verify,btnClass:"btn-blue",action:function(){var t=this.$content.find("#"+c+"-app-id").val(),r=this.$content.find("#"+c+"-app-secret").val();if(!t||!r)return a.alert({title:wpar_admin_L10n.error,content:wpar_admin_L10n.is_empty,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"30%",scrollToPreviousElement:!1}),!1;i.close(),a.post(wpar_admin_L10n.ajaxurl,{action:"wpar_generate_"+c+"_auth_url",app_id:t,app_secret:r,security:wpar_admin_L10n.security},function(t,c){!0===t.success?""!=t.data.redirect_url&&(window.location.href=t.data.redirect_url):(e.val(n).removeClass("disabled"),a("#"+o+" .spinner").removeClass("is-active"),a("#"+o+" .nonce-error").text(t.data.error).show().delay(3e3).fadeOut("slow"))})}},cancel:{text:wpar_admin_L10n.cancel_button,action:function(){a("#"+o+" .spinner").removeClass("is-active"),e.val(n).removeClass("disabled")}}}})});var t=function(){a("a.wpar-social-single-update").click(function(e){e.preventDefault();var n=a(this),c=n.text(),o=n.data("account-id"),i=n.data("account-type"),r=n.data("update-action"),s=n.data("selector");n.text(n.data("processing")),a("#"+s+" .nonce-success, #"+s+" .nonce-error").hide(),a.post(wpar_admin_L10n.ajaxurl,{action:"wpar_process_social_account_update",account_id:o,account_type:i,update_action:r,security:wpar_admin_L10n.security},function(e,r){!0===e.success?("activate"===e.data.status?(a("td.wpar-"+i+"-status-"+o).html('<span class="wpar-social-account-status enabled">'+wpar_admin_L10n.enabled+"</span>"),a("span.wpar-"+i+"-action-btn-"+o).html('<a href="#" class="wpar-social-single-update" data-selector="wpar-'+i+'" data-account-type="'+i+'" data-action="wpar_process_social_account_update" data-update-action="deactivate" data-account-id="'+o+'" data-processing="'+wpar_admin_L10n.deactivating+'">'+wpar_admin_L10n.deactivate+"</a>")):"deactivate"===e.data.status&&(a("td.wpar-"+i+"-status-"+o).html('<span class="wpar-social-account-status disabled">'+wpar_admin_L10n.disabled+"</span>"),a("span.wpar-"+i+"-action-btn-"+o).html('<a href="#" class="wpar-social-single-update" data-selector="wpar-'+i+'" data-account-type="'+i+'" data-action="wpar_process_social_account_update" data-update-action="activate" data-account-id="'+o+'" data-processing="'+wpar_admin_L10n.activating+'">'+wpar_admin_L10n.activate+"</a>")),a("#"+s+" .nonce-success").show().delay(3e3).fadeOut("slow"),t()):(n.text(c),a("#"+s+" .nonce-error").text(e.data.error).show().delay(3e3).fadeOut("slow"))})})};t(),a("a.wpar-delete-social-single").click(function(t){t.preventDefault();var e=a(this),n=e.text(),c=e.data("account-id"),o=e.data("account-type"),i=e.data("selector");a.confirm({title:wpar_admin_L10n.warning,content:e.data("notice"),useBootstrap:!1,theme:"material",animation:"scale",type:"red",boxWidth:"30%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wpar_admin_L10n.confirm_button,action:function(){e.text(e.data("processing")),a.post(wpar_admin_L10n.ajaxurl,{action:"wpar_process_delete_social_single",account_id:c,account_type:o,security:wpar_admin_L10n.security},function(t,r){!0===t.success?(!0===t.data.replace_html&&(a("#wpar-"+o+"-"+c).remove(),a("#wpar-"+o+"-accounts-list tbody").find("td.social-td").length||a("#wpar-"+o+"-accounts-list, input.wpar-"+o+"-btn-remove").remove()),a("#"+i+" .nonce-success").show().delay(3e3).fadeOut("slow")):(e.text(n),a("#"+i+" .nonce-error").text(t.data.error).show().delay(3e3).fadeOut("slow"))})}},cancel:{text:wpar_admin_L10n.cancel_button,action:function(){}}}})}),a("a.wpar-template-social-single").click(function(t){t.preventDefault();var e=a(this),n=e.data("account-id"),c=e.data("account-type"),o=e.data("selector"),i=e.data("charecter");a.confirm({title:wpar_admin_L10n.edit_template,content:function(){var t=this;return a.ajax({url:wpar_admin_L10n.ajaxurl,dataType:"json",method:"POST",data:{action:"wpar_process_view_social_template",account_id:n,account_type:c,security:wpar_admin_L10n.security}}).done(function(a){!0===a.success?t.setContentAppend('<textarea id="wpar-social-template" rows="4" style="width: 100%;">'+a.data.template+'</textarea><div><small style="line-height: 2;"><i>'+wpar_admin_L10n.use_this_tags+": </i><code>%post_title%</code> <code>%post_content%</code> <code>%post_url%</code> <code>%hashtags%</code>. <i>"+wpar_admin_L10n.charecter_limit+":</i> <code>"+i+"</code></small></div>"):t.setContentAppend(a.data.error)}).fail(function(){t.setContentAppend("<div>Fail!</div>")})},useBootstrap:!1,theme:"material",animation:"scale",type:"green",boxWidth:"30%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wpar_admin_L10n.save_template,action:function(){var t=a.dialog({title:wpar_admin_L10n.saving,content:wpar_admin_L10n.saving_text,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1}),e=this.$content.find("#wpar-social-template").val();a.post(wpar_admin_L10n.ajaxurl,{action:"wpar_process_save_social_template",account_id:n,account_type:c,template:e,security:wpar_admin_L10n.security},function(e,n){!0===e.success?(t.close(),a.alert({title:wpar_admin_L10n.done,content:wpar_admin_L10n.save_success,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wpar_admin_L10n.ok_button,action:function(){}}}})):a("#"+o+" .nonce-error").text(e.data.error).show().delay(3e3).fadeOut("slow")})}},cancel:{text:wpar_admin_L10n.cancel_button,action:function(){}}}})})});