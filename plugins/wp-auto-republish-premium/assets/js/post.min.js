jQuery(document).ready(function(e){function t(e,t,a,r){var p,_=new Date;new Date;_.setYear(t),_.setMonth(e),_.setDate(1);var n=a-_.getDay()+1;return n<0&&(n+=7),n+=7*(r||0),p=new Date(_.setDate(n)),p}function a(e,t){return d=new Date(e),new_weeks=7*t,e.setDate(e.getDate()+new_weeks),e}function r(e){return days=JSON.parse(wpar_post_L10n.weekdays),days[e.getDay()]}function p(e){return days=JSON.parse(wpar_post_L10n.weekdays),prefixes=JSON.parse(wpar_post_L10n.weekdays_prefix),e.getDate()>=1&&e.getDate()<=7?$ord=0:e.getDate()>=8&&e.getDate()<=14?$ord=1:e.getDate()>=15&&e.getDate()<=21?$ord=2:e.getDate()>=22&&e.getDate()<=28?$ord=3:e.getDate()>=28&&e.getDate()<=31&&($ord=4),prefixes[$ord]+" "+days[e.getDay()]}function _(e){return e.substring(0,1).toUpperCase()+e.substring(1)}function n(e){return("0"+e.getDate()).slice(-2)+"/"+("0"+(e.getMonth()+1)).slice(-2)+"/"+e.getFullYear()}function o(e){return("0"+(e.getMonth()+1)).slice(-2)+"/"+("0"+e.getDate()).slice(-2)+"/"+e.getFullYear()}function s(e){return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()}function l(e){return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)}function w(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()}if(e(".edit-republish-timestamp").length&&e(".edit-republish-timestamp").each(function(t,a){e(this).on("click",function(t){e(e(this).attr("href")).toggle(),t.preventDefault()})}),e("#wpar-static-date").datepicker({dateFormat:wpar_post_L10n.date_format,minDate:1,changeMonth:!0,changeYear:!0,yearRange:"+0:+10",altFormat:"m/dd/yy",altField:"#wpar_repost_on_date"}),e("#wpar-static-repost-start").datepicker({dateFormat:wpar_post_L10n.date_format,minDate:0,changeMonth:!0,changeYear:!0,yearRange:"+0:+5",altFormat:"m/dd/yy",altField:"#wpar_repost_start"}),e("#wpar-repost-end-on").datepicker({dateFormat:wpar_post_L10n.date_format,minDate:2,changeMonth:!0,changeYear:!0,yearRange:"+0:+5",altFormat:"m/dd/yy",altField:"#wpar_repost_end_on"}),e(".wpar-republish-timepicker").timepicker({timeFormat:"HH:mm:ss",stepHour:1,stepMinute:1,stepSecond:1}),e(".wpar-timepicker").timepicker({timeFormat:"HH:mm:ss",stepHour:1,stepMinute:1,stepSecond:1,showButtonPanel:!0,beforeShow:function(t){setTimeout(function(){var a=e(t).datepicker("widget").find(".ui-datepicker-buttonpane");e("<button>",{text:wpar_post_L10n.clear_text,click:function(){e.datepicker._clearDate(t)}}).appendTo(a).addClass("ui-datepicker-clear ui-state-default ui-priority-primary ui-corner-all")},1)},onChangeMonthYear:function(t,a,r){setTimeout(function(){var t=e(r).datepicker("widget").find(".ui-datepicker-buttonpane");e("<button>",{text:wpar_post_L10n.clear_text,click:function(){e.datepicker._clearDate(r.input)}}).appendTo(t).addClass("ui-datepicker-clear ui-state-default ui-priority-primary ui-corner-all")},1)}}),e("#wpar_repost_post_titles").selectize({plugins:["remove_button","restore_on_backspace","drag_drop"],delimiter:";;;",placeholder:wpar_post_L10n.text_post_title,persist:!1,create:function(e){return{value:e,text:e}}}),e("#wpar_repost_post_types").selectize({plugins:["remove_button"],delimiter:",",placeholder:wpar_post_L10n.select_post_types,persist:!1,create:!1}),e("#wpar_repost_taxonomies").selectize({plugins:["remove_button"],delimiter:",",placeholder:wpar_post_L10n.select_taxonomies,persist:!1,create:!1}),e("select[name=wpar_repost_post_titles_active]").on("change",function(t){"yes"==e(this).val()?e(".title-list, .wpar_post_update_url").show():e(".title-list, .wpar_post_update_url").hide()}),e("#wpar_meta_box input[name=wpar_repost_option]").length){var u,d=new Date;function h(){u="weeks"==e("#wpar_repost_after_time").val()?new Date((new Date).getTime()+24*parseInt(e("#wpar_repost_after_number").val())*60*60*1e3*7):"months"==e("#wpar_repost_after_time").val()?new Date((new Date).setMonth(d.getMonth()+parseInt(e("#wpar_repost_after_number").val()))):"years"==e("#wpar_repost_after_time").val()?new Date((new Date).setFullYear(d.getFullYear()+parseInt(e("#wpar_repost_after_number").val()))):new Date((new Date).getTime()+24*parseInt(e("#wpar_repost_after_number").val())*60*60*1e3),"days"==e("input[name=wpar_repost_option]:checked").val()&&(e("#wpar_repost_schedule").val(w(u)),""!=e("#wpar_repost_after_number").val()?(e("#wpar_repost_date").text(wpar_post_L10n.set_on+" "+n(u)),e("#wpar_repost_done").val("no")):e("#wpar_repost_date").text(wpar_post_L10n.not_set))}e("#wpar_meta_box input[name=wpar_repost_option]").on("change",function(t){"repeat"==e(this).val()?e("#repeat_repost_option").show():e("#repeat_repost_option").hide(),"days"==e(this).val()&&h(),"date"==e(this).val()&&(e("#wpar_repost_schedule").val(e("#wpar_repost_on_date").val()),e("#wpar_repost_date").text(wpar_post_L10n.set_on+" "+e("#wpar-static-date").val())),"disable"==e(this).val()?(e(".wpar-time-div").hide(),e("#wpar_repost_schedule").val("1/1/2030"),e("#wpar_repost_date").text(wpar_post_L10n.disabled),e("#wpar_repost_done").val("yes")):(e(".wpar-time-div").show(),e("#wpar_repost_done").val("no"))}),e("#wpar_repost_after_number").on("change keyup mouseup",function(e){h()}),e("#wpar_repost_after_time").on("change",function(e){h()}),e("#wpar_repost_on_date, #wpar-static-date").on("change",function(t){"date"==e("input[name=wpar_repost_option]:checked").val()&&(e("#wpar_repost_schedule").val(e("#wpar_repost_on_date").val()),e("#wpar_repost_date").text(wpar_post_L10n.set_on+" "+e("#wpar-static-date").val()))}),e("input[name=wpar_repost_option], #wpar_repost_repeats, #wpar_repost_every, input.wpar_repost_on, input.wpar_repost_monthly_on, input[name=wpar_repost_by], #wpar_repost_start, input[name=wpar_repost_end], #wpar_repost_end_after, #wpar_repost_end_on, #wpar-repost-end-on, #wpar-static-repost-start, #wpar-static-date, #wpar_repost_at_specific_time").change(function(h){var c,m,v,g,y,f="",D=e("#wpar_repost_repeats").val(),x=parseInt(e("#wpar_repost_every").val()),M=new Date(e("#wpar_repost_start").val()),b=e("input.wpar_repost_monthly_on:checked"),L=e("input[name=wpar_repost_by]:checked").val(),k=parseInt(e("#wpar-minute-limit").val()),F=e("#wpar_repost_at_specific_time").val(),Y=null;for(u=null;null==u;){if(u=null!=Y?Y:new Date,f="","weekly"==D){for(e("#wpar_repeat_monthly_on_wrap").hide(),e("#wpar_repeat_by_wrap").hide(),e("#wpar_last_republish_time_range").hide(),c=wpar_post_L10n.week_repeat,m=wpar_post_L10n.weekly_repeat,e("#wpar_repost_every").empty(),i=1;i<=52;i++)e("#wpar_repost_every").append(e("<option />",{value:i}).text(i));e("#wpar_repost_every option[value='"+x+"']").length>0?e("#wpar_repost_every").val(x):e("#wpar_repost_every").val("1"),u=M>u?M:a(M,x),f=f+" "+wpar_post_L10n.text_on+" "+r(u)}else if("monthly"==D){if(e("#wpar_repeat_by_wrap").show(),e("#wpar_repeat_monthly_on_wrap").show(),e("#wpar_last_republish_time_range").hide(),c=wpar_post_L10n.month_repeat,m=wpar_post_L10n.monthly_repeat,y=M,"month"==L?(y>u?M.setMonth(M.getMonth()):M.setMonth(M.getMonth()+x),f=f+" "+wpar_post_L10n.text_on_day+" "+M.getDate()):(y>u?M.setMonth(M.getMonth()):M.setMonth(M.getMonth()+x),f=f+" "+wpar_post_L10n.text_on+" "+p(M),index=0|M.getDate()/7,M=t(M.getMonth(),M.getFullYear(),M.getDay(),index)),b.length)if(b.length>=12)f=f+" "+wpar_post_L10n.text_all_months;else for(f=f+" "+wpar_post_L10n.text_of+" ",selectedMonths=new Array,b.each(function(t,a){f=t>0?f+", "+_(e(this).data("month")):f+" "+_(e(this).data("month")),selectedMonths.push(_(e(this).val()))}),loopStwparer=0;loopStwparer<=36&&selectedMonths.indexOf(M.toLocaleString("en-US",{month:"long"}))<0;)"month"==L?y>u?M.setMonth(M.getMonth()):M.setMonth(M.getMonth()+x):(y>u?M.setMonth(M.getMonth()):M.getMonth()+x>=12?(M.setMonth(M.getMonth()+x),M.setFullYear(M.getFullYear()+(M.getMonth()+x)/12)):M.setMonth(M.getMonth()+x),index=0|d.getDate()/7,M=t(M.getMonth(),M.getFullYear(),M.getDay(),index)),loopStwparer>=36&&(M=""),loopStwparer++;else f=f+" "+wpar_post_L10n.text_all_months;for(u=y>u?y:M,M=y,e("#wpar_repost_every").empty(),i=1;i<=12;i++)e("#wpar_repost_every").append(e("<option />",{value:i}).text(i));e("#wpar_repost_every option[value='"+x+"']").length>0?e("#wpar_repost_every").val(x):e("#wpar_repost_every").val("1")}else if("yearly"==D){for(e("#wpar_repeat_by_wrap").hide(),e("#wpar_repeat_monthly_on_wrap").hide(),e("#wpar_last_republish_time_range").hide(),c=wpar_post_L10n.year_repeat,m=wpar_post_L10n.yearly_repeat,M>u?u.setFullYear(M.getFullYear(),M.getMonth(),M.getDate()):u.setFullYear(M.getFullYear()+x,M.getMonth(),M.getDate()),e("#wpar_repost_every").empty(),i=1;i<=30;i++)e("#wpar_repost_every").append(e("<option />",{value:i}).text(i));e("#wpar_repost_every option[value='"+x+"']").length>0?e("#wpar_repost_every").val(x):e("#wpar_repost_every").val("1")}else if("daily"==D){for(e("#wpar_repeat_by_wrap").hide(),e("#wpar_repeat_monthly_on_wrap").hide(),e("#wpar_last_republish_time_range").hide(),c=wpar_post_L10n.day_repeat,m=wpar_post_L10n.daily_repeat,u=M>u?M:new Date(M.getTime()+24*x*60*60*1e3),e("#wpar_repost_every").empty(),i=1;i<=30;i++)e("#wpar_repost_every").append(e("<option />",{value:i}).text(i));e("#wpar_repost_every option[value='"+x+"']").length>0?e("#wpar_repost_every").val(x):e("#wpar_repost_every").val("1")}else if("hourly"==D){for(e("#wpar_repeat_by_wrap").hide(),e("#wpar_repeat_monthly_on_wrap").hide(),e("#wpar_last_republish_time_range").show(),c=wpar_post_L10n.hour_repeat,m=wpar_post_L10n.hourly_repeat,u=new Date(M.getTime()+60*x*60*1e3),e("#wpar_repost_every").empty(),i=1;i<=23;i++)e("#wpar_repost_every").append(e("<option />",{value:i}).text(i));if(e("#wpar_repost_every option[value='"+x+"']").length>0?e("#wpar_repost_every").val(x):e("#wpar_repost_every").val("1"),"repeat"==e("input[name=wpar_repost_option]:checked").val()){var S=new Date,T=new Date(s(M)+" "+F);S.setMinutes(S.getMinutes()+60),T.getTime()<S.getTime()&&e("#wpar_repost_at_specific_time").val(l(S))}}else{for(e("#wpar_repeat_by_wrap").hide(),e("#wpar_repeat_monthly_on_wrap").hide(),e("#wpar_last_republish_time_range").show(),c=wpar_post_L10n.min_repeat,m=wpar_post_L10n.minutes_repeat,u=new Date(M.getTime()+60*x*1e3),e("#wpar_repost_every").empty(),i=k;i<=59;i++)e("#wpar_repost_every").append(e("<option />",{value:i}).text(i));if(e("#wpar_repost_every option[value='"+x+"']").length>0?e("#wpar_repost_every").val(x):e("#wpar_repost_every").val(k),"repeat"==e("input[name=wpar_repost_option]:checked").val()){S=new Date,T=new Date(s(M)+" "+F);S.setMinutes(S.getMinutes()+5),T.getTime()<S.getTime()&&e("#wpar_repost_at_specific_time").val(l(S))}}u&&("after"==e("input[name=wpar_repost_end]:checked").val()&&e("#wpar_repost_end_after").val()>1?(f=f+", "+e("#wpar_repost_end_after").val()+" "+wpar_post_L10n.text_times,f=f+". "+wpar_post_L10n.next_schedule+" "+n(u)):"on"==e("input[name=wpar_repost_end]:checked").val()&&""!=e("#wpar_repost_end_on").val()?(v=new Date(e("#wpar_repost_end_on").val()),g=v.toLocaleString("default",{month:"long"}),f=f+", "+wpar_post_L10n.text_until+" "+g+" "+v.getDate()+", "+v.getFullYear(),u<v?f=f+". "+wpar_post_L10n.next_schedule+" "+n(u):(Y=null,u="")):f=f+". "+wpar_post_L10n.next_schedule+" "+n(u),(u>=M||""==u)&&null!=u?u=u:(Y=u,u=null))}"never"!=e("#wpar_meta_box input[name=wpar_repost_end]:checked").val()?e("#wpar_last_republish_status").show():e("#wpar_last_republish_status").hide(),"repeat"==e("input[name=wpar_repost_option]:checked").val()&&""!=x&&(x>1?e("#wpar_repost_date").text(wpar_post_L10n.text_set_every+" "+x+" "+c+f):e("#wpar_repost_date").text(wpar_post_L10n.text_set+" "+m+f),""!=u&&e("#wpar_repost_schedule").val(w(u)),d>M&&(e("#wpar-static-repost-start").val(n(d)),e("#wpar_repost_start").val(o(d)))),e("#wpar_regenerate_cron_event").val("yes")}).stop()}e("#publishing-action input[name=publish]").click(function(t){e("#wpar_regenerate_cron_event").val("yes")})});