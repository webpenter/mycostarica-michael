jQuery(document).ready(function(e){if("undefined"==typeof wpar_admin_L10n)return!1;for(var t=e("#nav-container").find("a.nav-tab:not(.type-link)"),a=0;a<t.length;a++)e(t[a]).click(function(t){t.preventDefault(),e("a.nav-tab-active").removeClass("nav-tab-active"),e(this).addClass("nav-tab-active"),e(".wpar-metabox .wpar-"+e(this).attr("id")).show(),e(".wpar-metabox .postbox:not(.wpar-"+e(this).attr("id")+"), .wpar-metabox .sub-links:not(.wpar-"+e(this).attr("id")+")").hide(),e.cookie("wpar_active_tab",e(this).attr("id"),{expires:30})});void 0!==e.cookie("wpar_active_tab")&&e("#nav-container").find("a#"+e.cookie("wpar_active_tab")).trigger("click"),e("#wpar-settings-form").submit(function(){e(".wpar-save").addClass("disabled").val(wpar_admin_L10n.saving);var t=e.dialog({title:wpar_admin_L10n.saving,content:wpar_admin_L10n.saving_text,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});return e(this).ajaxSubmit({success:function(){t.close(),e.alert({title:wpar_admin_L10n.done,content:wpar_admin_L10n.save_success,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wpar_admin_L10n.ok_button,action:function(){}}}}),e(".wpar-save").removeClass("disabled").val(wpar_admin_L10n.save_button)},error:function(){t.close(),e.alert({title:wpar_admin_L10n.error,content:wpar_admin_L10n.process_failed,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wpar_admin_L10n.ok_button,action:function(){}}}})}}),!1}),e("input.wpar-copy").click(function(t){t.preventDefault();var a=e(this),r=a.val();a.addClass("disabled").val(wpar_admin_L10n.please_wait),e.post(wpar_admin_L10n.ajaxurl,{action:"wpar_process_copy_data",security:wpar_admin_L10n.security},function(t,n){if(!0===t.success){var i=e("<input>");e("body").append(i),i.val(t.data.settings_data).select(),document.execCommand("copy"),i.remove(),a.removeClass("disabled").val(r),e(".wpar-copied").show().delay(1e3).fadeOut()}})}),e("input.wpar-paste").click(function(t){t.preventDefault();e(this);var a=e.confirm({title:wpar_admin_L10n.paste_data,content:'<textarea id="wpar-settings-data-import" rows="4" style="width: 100%;"></textarea>',useBootstrap:!1,theme:"material",animation:"scale",type:"green",boxWidth:"40%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wpar_admin_L10n.import_btn,action:function(){var t=this.$content.find("#wpar-settings-data-import").val();if(!t)return alert("Please enter valid settings data!"),!1;a.close(),e.dialog({title:wpar_admin_L10n.importing,content:wpar_admin_L10n.processing,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1}),e.post(wpar_admin_L10n.ajaxurl,{action:"wpar_process_import_data",settings_data:t,security:wpar_admin_L10n.security},function(t,a){!0===t.success&&(window.location.reload(),e.cookie("wpar_active_tab","general",{expires:30}))})}},close:{text:wpar_admin_L10n.close_btn,action:function(){}}}})}),e("input.wpar-reset").click(function(t){t.preventDefault();var a=e(this),r=a.data("action"),n=a.data("notice"),i=a.data("success"),o=a.data("reload"),s=e.confirm({title:wpar_admin_L10n.warning,content:n,useBootstrap:!1,theme:"material",animation:"scale",type:"red",boxWidth:"30%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wpar_admin_L10n.confirm_button,action:function(){s.close();var t=e.dialog({title:wpar_admin_L10n.deleting,content:wpar_admin_L10n.processing,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});e.post(wpar_admin_L10n.ajaxurl,{action:r,security:wpar_admin_L10n.security},function(a,r){!0===a.success?(t.close(),e.alert({title:wpar_admin_L10n.done,content:i,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wpar_admin_L10n.ok_button,action:function(){!0===o&&window.location.reload()}}}})):(t.close(),e.alert({title:wpar_admin_L10n.error,content:a.data.error,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wpar_admin_L10n.ok_button,action:function(){}}}}))})}},cancel:{text:wpar_admin_L10n.cancel_button,action:function(){}}}})}),e("select.wpar-post-types").selectize({plugins:["remove_button"],delimiter:",",placeholder:wpar_admin_L10n.select_post_types,persist:!1,create:!1}),e("select.wpar-taxonomies").selectize({plugins:["remove_button"],delimiter:",",placeholder:wpar_admin_L10n.select_taxonomies,persist:!1,create:!1}),e("select#wpar_republish_days").selectize({plugins:["remove_button"],delimiter:",",placeholder:wpar_admin_L10n.select_weekdays,persist:!1,create:!1}),e("#wpar_override_category_tag").selectize({plugins:["remove_button","restore_on_backspace","drag_drop"],delimiter:",",placeholder:wpar_admin_L10n.post_ids,persist:!1,create:function(e){return{value:e,text:e}},createFilter:function(e){var t=/^\d+$/;return t.test(e)}}),e(".wpar-datepicker").datepicker({dateFormat:"dd/mm/yy",maxDate:-1,changeMonth:!0,changeYear:!0,yearRange:"-15:+0",defaultDate:"-5y"}),e(".wpar-timepicker").timepicker({timeFormat:"HH:mm:ss",stepHour:1,stepMinute:1,stepSecond:1}),e("#wpar_republish_info").change(function(){"disable"==e("#wpar_republish_info").val()&&(e(".wpar_css_republish_info_text, .wpar_css_post_types_list_display").hide(),e("#wpar_css_republish_info_text").removeAttr("required")),"disable"!=e("#wpar_republish_info").val()&&(e(".wpar_css_republish_info_text, .wpar_css_post_types_list_display").show(),e("#wpar_css_republish_info_text").attr("required","required"))}).change();var r=function(e){var t=new Date;return t.setDate(t.getDate()-e),t.toLocaleDateString()};e("#wpar_republish_post_age").change(function(){"custom"==e(this).val()?(e(".wpar_css_republish_custom_age, #wpar-post-age-help .wpar-has-limit").show(),e("#wpar_republish_custom_age").attr("required","required"),e("#wpar-post-age-help .wpar-no-limit").hide(),e("#wpar-post-age-help .wpar-age-date").text(r(e("#wpar_republish_custom_age").val()))):"0"==e(this).val()?(e("#wpar-post-age-help .wpar-no-limit").show(),e("#wpar-post-age-help .wpar-has-limit, .wpar_css_republish_custom_age").hide()):(e("#wpar-post-age-help .wpar-has-limit").show(),e(".wpar_css_republish_custom_age, #wpar-post-age-help .wpar-no-limit").hide(),e("#wpar_republish_custom_age").removeAttr("required"),e("#wpar-post-age-help .wpar-age-date").text(r(e(this).val())))}).change(),e("#wpar_exclude_by_type").change(function(){"none"==e(this).val()&&e(".wpar_css_post_taxonomy, .wpar_css_custom_taxonomy, .wpar_css_override_category_tag").hide(),"none"!=e(this).val()&&e(".wpar_css_post_taxonomy, .wpar_css_custom_taxonomy, .wpar_css_override_category_tag").show()}).change(),e(".coffee-amt").change(function(){var t=e(".buy-coffee-btn");t.attr("href",t.data("link")+e(this).val())}),e(window).keydown(function(t){if(t.ctrlKey||t.metaKey)switch(String.fromCharCode(t.which).toLowerCase()){case"s":t.preventDefault(),e("#wpar-settings-form").submit()}})});